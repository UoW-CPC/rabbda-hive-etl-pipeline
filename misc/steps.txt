1. download the project
git clone https://github.com/UoW-CPC/rabbda-hive-etl-pipeline.git
 
2. download the earthquakes for years 2017 2018 2019
bash downloadEarthquakesData.sh 

3. clear the header
python ClearTitles.py 

4. split the year, date and time
python SplitDateTime.py

5. upload the data sets to hdfs
hdfs dfs -put ../data/earthquakes-final.csv /user/dkagialis/demo
hdfs dfs -put ../data/cities.csv /user/dkagialis/demo
hdfs dfs -put ../data/seismographic-stations.csv /user/dkagialis/demo

6. create ETL pipelibe database
beeline -u jdbc:hive2://rm01.itversity.com:10000 -n hive -f create-db.sql

7. create table cities
beeline -u jdbc:hive2://rm01.itversity.com:10000 -n hive -f cities.sql

8. create table seismographic-stations
beeline -u jdbc:hive2://rm01.itversity.com:10000 -n hive -f seismographic-stations.sql

9. create table earthquakes_full_dataset
beeline -u jdbc:hive2://rm01.itversity.com:10000 -n hive -f 1.sql

10. create table earthquakes with columns: id, time, day, latitude, longitude, magnitude
beeline -u jdbc:hive2://rm01.itversity.com:10000 -n hive -f 2.sql

11. create table earthquakes_distance_to_all_cities with cross join
beeline -u jdbc:hive2://rm01.itversity.com:10000-n hive -f 3.sql

12. create table earthquakes_closest_city inner join
beeline -u jdbc:hive2://rm01.itversity.com:10000 -n hive -f 4.sql

13. create table earthquakes_closest_city_discance_to_all_stations cross join
beeline -u jdbc:hive2://rm01.itversity.com:10000 -n hive -f 5.sql

14. create table earthquakes_closest_city_station inner join
beeline -u jdbc:hive2://rm01.itversity.com:10000 -n hive -f 6.sql

15. export table earthquakes_closest_city_station to HDFS
beeline -u jdbc:hive2://rm01.itversity.com:10000 -n hive -f export-to-hdfs.sql

16. download the ETL pipeline results to local host
hdfs dfs -get /user/dkagialis/demo/data/000000_0 earthquakes_closest_city_station.csv

17. 
beeline -u jdbc:hive2://rm01.itversity.com:10000 -n hive -f people.sql

18. create the seismograph
python seismograph.py

19. group earthquakes by year 
spark-sumbit earthquakes

20. group earthquakes by country
spark-sumbit earthquakes

21. present the results with Tableau


